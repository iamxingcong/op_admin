{"ast":null,"code":"var _jsxFileName = \"/Users/xc/Public/capacity_1103/front_new/src/views/pages/IasDetail.js\";\nimport React from 'react';\nimport { Table, Button, Form, Input, InputNumber, notification } from 'antd';\nimport { MinusCircleOutlined, PlusCircleOutlined } from '@ant-design/icons';\nimport axios from \"axios\";\nimport { APIURL } from '../../common/constdt.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class IasDetail extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onFinish = values => {\n      console.log('Success:', values);\n\n      for (let i in values) {\n        if (!values[i]) {\n          notification.error({\n            message: '提示',\n            description: i + \" 的值不能为 \" + values[i],\n            duration: 60,\n            placement: 'topCenter',\n            onClick: () => {\n              console.log('Notification Clicked!');\n            }\n          });\n          return;\n        }\n      }\n\n      this.setState({\n        event_id: this.props.id,\n        domain: values.domain,\n        now_qps: 100,\n        pre_qps: values.pre_qps\n      });\n      this.createisa();\n    };\n\n    this.onFinishFailed = errorInfo => {\n      console.log('Failed:', errorInfo);\n    };\n\n    this.footer = () => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tbfootertds4\",\n        children: this.state.opendiv || this.state.tabledtnew.length === 0 ? /*#__PURE__*/_jsxDEV(Form, {\n          onFinish: this.onFinish,\n          onFinishFailed: this.onFinishFailed,\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                    label: \"\",\n                    name: \"domain\",\n                    children: /*#__PURE__*/_jsxDEV(Input, {\n                      placeholder: \"\\u57DF\\u540D\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 297,\n                      columnNumber: 37\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 293,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 290,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                    label: \"\",\n                    name: \"pre_qps\",\n                    children: /*#__PURE__*/_jsxDEV(InputNumber, {\n                      placeholder: \"\\u9884\\u4F30QPS\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 307,\n                      columnNumber: 37\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 303,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"--\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 310,\n                  columnNumber: 28\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      type: \"primary\",\n                      htmlType: \"submit\",\n                      children: \" \\u786E\\u8BA4\\u6DFB\\u52A0\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 315,\n                      columnNumber: 37\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 314,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 22\n        }, this) : \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 17\n      }, this);\n    };\n\n    this.state = {\n      opendiv: false,\n      event_id: null,\n      domain: null,\n      now_qps: null,\n      pre_qps: null,\n      tabledtnew: [],\n      user_name: null\n    };\n    this.adddiv = this.adddiv.bind(this);\n    this.agetRates = this.agetRates.bind(this);\n    this.dele = this.dele.bind(this);\n    this.confirmdt = this.confirmdt.bind(this);\n  }\n\n  componentDidMount() {\n    console.log(this.props.id);\n    this.agetRates();\n  }\n\n  async agetRates() {\n    const ts = this.props.id;\n    const url = `${APIURL}/ias/list?event_id=${ts}`;\n    var that = this;\n    await axios.get(url, {\n      withCredentials: true\n    }).then(function (response) {\n      if (response.data.data) {\n        that.setState({\n          tabledtnew: response.data.data\n        });\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  adddiv(v) {\n    console.log(v);\n    this.setState({\n      opendiv: true\n    });\n  }\n\n  async dele(v) {\n    console.log(v);\n    const url = `${APIURL}/ias/delete`;\n    var bodyFormData = new FormData();\n    bodyFormData.append(\"ias_id\", v.id);\n    let that = this;\n    await axios.post(url, bodyFormData, {\n      withCredentials: true\n    }).then(function (response) {\n      if (response.data.code === 0) {\n        that.agetRates();\n        notification.success({\n          message: '提示',\n          description: '删除成功！',\n          placement: 'topCenter',\n          onClick: () => {\n            console.log('Notification Clicked!');\n          }\n        });\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  async confirmdt(v) {\n    console.log(v);\n    const url = `${APIURL}/ias/verify`;\n    var bodyFormData = new FormData();\n    bodyFormData.append(\"ias_id\", v.id);\n    bodyFormData.append(\"event_id\", this.props.id);\n\n    if (this.props.EngName) {\n      bodyFormData.append(\"user_name\", this.props.EngName);\n    }\n\n    let that = this;\n    await axios.post(url, bodyFormData, {\n      withCredentials: true\n    }).then(function (response) {\n      if (response.data.code === 0) {\n        that.agetRates();\n        notification.success({\n          message: '提示',\n          description: '确认成功！',\n          duration: 60,\n          onClick: () => {\n            console.log('Notification Clicked!');\n          }\n        });\n      } else {\n        notification.error({\n          message: '提示',\n          description: response.data.msg,\n          duration: 60,\n          placement: 'topCenter',\n          onClick: () => {\n            console.log('Notification Clicked!');\n          }\n        });\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  async createisa() {\n    let url = `${APIURL}/ias/create`;\n    var bodyFormData = new FormData();\n    bodyFormData.append(\"event_id\", this.state.event_id);\n    bodyFormData.append(\"domain\", this.state.domain);\n    bodyFormData.append(\"now_qps\", this.state.now_qps);\n    bodyFormData.append(\"pre_qps\", this.state.pre_qps);\n    var that = this;\n    await axios.post(url, bodyFormData, {\n      withCredentials: true\n    }).then(function (response) {\n      if (response.data.code === 0) {\n        notification.success({\n          message: '提示',\n          description: response.data.msg,\n          placement: 'topCenter',\n          onClick: () => {\n            console.log('Notification Clicked!');\n          }\n        });\n        that.setState({\n          opendiv: false\n        });\n        that.agetRates();\n      } else {\n        notification.error({\n          message: '提示',\n          description: response.data.msg,\n          duration: 60,\n          placement: 'topCenter',\n          onClick: () => {\n            console.log('Notification Clicked!');\n          }\n        });\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  render() {\n    const columns = [{\n      title: '域名',\n      dataIndex: 'domain',\n      align: \"center\",\n      width: \"25%\"\n    }, {\n      title: '预估QPS',\n      dataIndex: 'pre_qps',\n      align: \"center\",\n      width: \"25%\"\n    }, {\n      title: '平台负责人确认',\n      dataIndex: 'confirm_status',\n      align: \"center\",\n      width: \"25%\",\n      render: (text, data, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: data.confirm_status === 0 ? /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => this.confirmdt(data),\n          type: \"primary\",\n          size: \"small\",\n          children: \"\\u786E\\u8BA4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"brespans\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: data.confirm_user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 31\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: data.confirm_datetime\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 31\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 27\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 21\n      }, this)\n    }, {\n      title: '操作',\n      dataIndex: 'type_name',\n      align: \"center\",\n      width: \"25%\",\n      render: (text, data, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n        children: index !== this.state.tabledtnew.length - 1 ? data.confirm_status == 0 ? /*#__PURE__*/_jsxDEV(Button, {\n          icon: /*#__PURE__*/_jsxDEV(MinusCircleOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 75\n          }, this),\n          onClick: () => this.dele(data)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 61\n        }, this) : \"--\" : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: data.confirm_status == 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              icon: /*#__PURE__*/_jsxDEV(MinusCircleOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 59\n              }, this),\n              onClick: () => this.dele(data)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              icon: /*#__PURE__*/_jsxDEV(PlusCircleOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 59\n              }, this),\n              onClick: this.adddiv\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 45\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 45\n          }, this) : /*#__PURE__*/_jsxDEV(Button, {\n            icon: /*#__PURE__*/_jsxDEV(PlusCircleOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 55\n            }, this),\n            onClick: this.adddiv\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 21\n      }, this)\n    }];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"IasDetail\",\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        columns: columns,\n        rowKey: \"id\",\n        dataSource: this.state.tabledtnew,\n        pagination: {\n          total: this.state.tabledtnew.length,\n          pageSize: this.state.tabledtnew.length\n        },\n        footer: this.footer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/xc/Public/capacity_1103/front_new/src/views/pages/IasDetail.js"],"names":["React","Table","Button","Form","Input","InputNumber","notification","MinusCircleOutlined","PlusCircleOutlined","axios","APIURL","IasDetail","Component","constructor","props","onFinish","values","console","log","i","error","message","description","duration","placement","onClick","setState","event_id","id","domain","now_qps","pre_qps","createisa","onFinishFailed","errorInfo","footer","state","opendiv","tabledtnew","length","user_name","adddiv","bind","agetRates","dele","confirmdt","componentDidMount","ts","url","that","get","withCredentials","then","response","data","catch","v","bodyFormData","FormData","append","post","code","success","EngName","msg","render","columns","title","dataIndex","align","width","text","index","confirm_status","confirm_user","confirm_datetime","total","pageSize"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Table, Button, Form, Input, InputNumber,notification } from 'antd';\nimport { MinusCircleOutlined, PlusCircleOutlined } from '@ant-design/icons';\n\nimport axios from \"axios\";\n\n\nimport {  APIURL } from '../../common/constdt.js';\n\n\n\n\nexport default class IasDetail extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            \n            opendiv: false,\n\n            event_id: null,\n            domain: null,\n            now_qps: null,\n            pre_qps: null,\n            tabledtnew: [],\n            user_name: null,\n   \n        }\n\n        this.adddiv = this.adddiv.bind(this)\n\n        this.agetRates = this.agetRates.bind(this)\n        \n        this.dele = this.dele.bind(this)\n        this.confirmdt = this.confirmdt.bind(this)\n\n    }\n\n\n\n\n    componentDidMount() {\n       \n       \n        console.log(this.props.id)\n\n\n       \n\n        this.agetRates();\n\n    }\n\n   \n   \n    async agetRates() {\n\n           \n\n\n        const ts = this.props.id\n        const url = `${APIURL}/ias/list?event_id=${ts}`;\n\n        var that = this;\n       \n        await axios.get(url, { withCredentials: true })\n        .then(function (response) {\n          \n          if (response.data.data) {\n            \n                that.setState({\n                    \n                    tabledtnew: response.data.data,\n                })\n            }\n        })\n        .catch(function (error) {\n          console.log(error);\n\n          \n        })\n       \n\n \n    }\n\n\n    adddiv(v) {\n \n\n        console.log(v)\n        this.setState({\n            opendiv: true,\n        })\n        \n    }\n\n    async dele(v){\n        console.log(v)\n\n        const url = `${APIURL}/ias/delete`;\n\n        var bodyFormData = new FormData();\n        bodyFormData.append(\"ias_id\", v.id);\n        \n        let that = this;\n       \n        await axios.post(url, bodyFormData, { withCredentials: true })\n        .then(function (response) {\n        \n            \n          \n          if (response.data.code === 0) {\n                 \n                that.agetRates();\n              \n                notification.success({\n                    message: '提示',\n                    description: '删除成功！',\n                    placement: 'topCenter',\n                    onClick: () => {\n                      console.log('Notification Clicked!');\n                    },\n                });\n\n            } \n        })\n        .catch(function (error) {\n          console.log(error);\n         \n        })\n       \n\n    }\n    async confirmdt(v){\n         \n        console.log(v)\n        const url = `${APIURL}/ias/verify`;\n\n        var bodyFormData = new FormData();\n        bodyFormData.append(\"ias_id\", v.id);\n        bodyFormData.append(\"event_id\", this.props.id);\n        if(this.props.EngName){\n            bodyFormData.append(\"user_name\", this.props.EngName);\n        }\n        \n \n        let that = this;\n\n        await axios.post(url, bodyFormData, { withCredentials: true })\n        \n        .then(function (response) {\n          \n            \n          \n          if (response.data.code === 0) {\n                 \n                that.agetRates();\n            \n                notification.success({\n                    message: '提示',\n                    description: '确认成功！',\n                    duration: 60,\n                    onClick: () => {\n                      console.log('Notification Clicked!');\n                    },\n                });\n\n            } else {\n                \n             \n               notification.error({\n                    message: '提示',\n                    description: response.data.msg,\n                    duration: 60,\n                    placement: 'topCenter',\n                    onClick: () => {\n                    console.log('Notification Clicked!');\n                    },\n                });\n\n                \n            }\n        })\n        .catch(function (error) {\n          console.log(error);\n          \n        })\n    }\n\n    async createisa(){\n       let url = `${APIURL}/ias/create`;\n\n       var bodyFormData = new FormData();\n       bodyFormData.append(\"event_id\", this.state.event_id);\n       bodyFormData.append(\"domain\", this.state.domain);\n       bodyFormData.append(\"now_qps\", this.state.now_qps);\n       bodyFormData.append(\"pre_qps\", this.state.pre_qps);\n        var that = this\n       await axios.post(url, bodyFormData, { withCredentials: true })\n          .then(function (response) {\n           \n            \n            if(response.data.code === 0){\n                notification.success({\n                    message: '提示',\n                    description: response.data.msg,\n                    placement: 'topCenter',\n                    onClick: () => {\n                      console.log('Notification Clicked!');\n                    },\n                });\n                that.setState({\n                    opendiv: false,\n                })\n                that.agetRates()\n            } else {\n               \n                notification.error({\n                    message: '提示',\n                    description: response.data.msg,\n                    duration: 60,\n                    placement: 'topCenter',\n                    onClick: () => {\n                      console.log('Notification Clicked!');\n                    },\n                });\n\n            }\n            \n          })\n          .catch(function (error) {\n            console.log(error);\n            \n          })\n        \n    }\n\n\n      onFinish = (values) => {\n             \n        console.log('Success:', values);\n       \n        for(let i in values){\n            if(!values[i]){\n                 \n              \n                notification.error({\n                    message: '提示',\n                    description: i+\" 的值不能为 \"+ values[i],\n                    duration: 60,\n                    placement: 'topCenter',\n                    onClick: () => {\n                      console.log('Notification Clicked!');\n                    },\n                });\n                \n                return\n            }\n        }\n        this.setState({\n            event_id: this.props.id,\n            domain: values.domain,\n            now_qps: 100,\n            pre_qps: values.pre_qps\n        })\n\n        this.createisa();\n\n    };\n\n    onFinishFailed = (errorInfo) => {\n        console.log('Failed:', errorInfo);\n    };\n\n    footer = () => {\n         \n    \n        return( <div className=\"tbfootertds4\">\n            {this.state.opendiv || this.state.tabledtnew.length === 0 ? (\n                     <Form\n                        onFinish={this.onFinish}\n                        onFinishFailed={this.onFinishFailed}\n                    >\n                        \n                        <table>\n                        <tbody>\n                        <tr>\n                            <td>\n\n                           \n                                <Form.Item\n                                    label=\"\"\n                                    name=\"domain\"\n                                >\n                                    <Input placeholder=\"域名\" />\n                                </Form.Item>\n                            \n                            </td>\n                          \n                            <td>\n                                <Form.Item\n                                    label=\"\"\n                                    name=\"pre_qps\"\n                                >\n                                    <InputNumber placeholder=\"预估QPS\" />\n                                </Form.Item>\n                           </td>\n                           <td>\n                               --\n                            </td>\n                            <td>\n                                <Form.Item>\n                                    <Button type=\"primary\" htmlType=\"submit\"> 确认添加\n                                         \n                                    </Button>\n                                </Form.Item>\n                                </td>\n                            </tr>\n                        </tbody>\n                        </table>\n\n                    </Form>\n                    ) : (\n                        \n                         \"\"\n                    )}\n\n\n                   \n            </div>)\n            \n      };\n      \n\n\n    render() {\n\n\n\n        const columns = [\n            {\n                title: '域名',\n                dataIndex: 'domain',\n                align: \"center\",\n                width: \"25%\",\n            },\n            \n            {\n                title: '预估QPS',\n                dataIndex: 'pre_qps',\n                align: \"center\",\n                width: \"25%\",\n\n            },\n            {\n                title: '平台负责人确认',\n                dataIndex: 'confirm_status',\n                align: \"center\",\n                width: \"25%\",\n                render: (text, data, index) => (\n                    <div>\n                        {data.confirm_status === 0 ? (\n                          \n\n                            <Button   onClick={()=>this.confirmdt(data)} type=\"primary\" size=\"small\">\n                                确认\n                            </Button>\n\n                         \n                           \n                        ): (\n                          <div className=\"brespans\"> \n                              <span>\n                                {data.confirm_user } \n                              </span> \n                              <span>\n                                {  data.confirm_datetime } \n                               </span>\n                             </div>\n                        )}\n                    </div>\n                )\n\n\n            },\n            {\n                title: '操作',\n                dataIndex: 'type_name',\n                align: \"center\",\n                width: \"25%\",\n                render: (text, data, index) => (\n                    <span>\n                        { (index !== this.state.tabledtnew.length - 1) ? (\n\n                                data.confirm_status == 0 ? (<Button icon={<MinusCircleOutlined />}  onClick={()=>this.dele(data)}></Button>):(\"--\")\n                            \n\n                        ) : (\n                                <div>\n                                      {data.confirm_status == 0 ? (\n                                            <div>\n                                            <Button icon={<MinusCircleOutlined />}  onClick={()=>this.dele(data)}></Button>\n                                            <Button icon={<PlusCircleOutlined />} onClick={this.adddiv}></Button>\n                                            </div>\n                                      ):(\n                                        \n                                        <Button icon={<PlusCircleOutlined />} onClick={this.adddiv}></Button>\n                                      )}\n                                   \n                                </div>\n\n                            )\n\n                        }\n\n\n                    </span>\n                ),\n\n            },\n\n        ];\n\n\n\n        return (\n            <div id=\"IasDetail\">\n              \n           \n                <Table\n\n                    columns={columns}\n                    rowKey=\"id\"\n                    dataSource={this.state.tabledtnew}\n                    pagination={{\n                        total: this.state.tabledtnew.length,\n                        pageSize: this.state.tabledtnew.length,\n                    }}\n                    footer={this.footer}\n                />\n\n \n            </div>\n        )\n    }\n\n}\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/xc/Public/capacity_1103/front_new/src/views/pages/OTTDetail.js\";\nimport React from 'react';\nimport { Table, Button, Form, Checkbox, InputNumber, notification } from 'antd';\nimport axios from \"axios\";\nimport { withRouter } from 'react-router-dom';\nimport { APIURL } from '../../common/constdt.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar expanded = [];\nvar reduced = [];\n\nclass OTTDetail extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onFinish = values => {\n      console.log('Success:', values);\n    };\n\n    this.onSelectChange = selectedRowKeys => {\n      console.log('selectedRowKeys changed: ', selectedRowKeys);\n      this.setState({\n        fselectedRowKeys: selectedRowKeys\n      });\n    };\n\n    this.state = {\n      tabledtnew: [],\n      fselectedRowKeys: [],\n      expanded_ids: [],\n      reduced_ids: [],\n      inputnum: null\n    };\n    this.capacity_bulkExpand = this.capacity_bulkExpand.bind(this);\n    this.capacitybulkReduce = this.capacitybulkReduce.bind(this);\n    this.checkeddt = this.checkeddt.bind(this);\n    this.checkedrd = this.checkedrd.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n  }\n\n  componentDidMount() {\n    this.agetRates();\n  }\n\n  checkedrd(v) {\n    console.log(v.target);\n\n    if (v.target.checked) {\n      reduced.push(v.target.reduce);\n    } else {\n      let rtm = v.target.reduce;\n      let rindex = reduced.indexOf(rtm);\n      reduced.splice(rindex, 1);\n    }\n\n    this.setState({\n      reduced_ids: reduced\n    });\n    console.log(reduced);\n  }\n\n  checkeddt(v) {\n    console.log(v.target);\n    console.log(v.target.checked);\n\n    if (v.target.checked) {\n      expanded.push(v.target.expand);\n    } else {\n      let tm = v.target.expand;\n      let tmindex = expanded.indexOf(tm);\n      console.log(tmindex);\n      expanded.splice(tmindex, 1);\n    }\n\n    this.setState({\n      expanded_ids: expanded\n    });\n    console.log(expanded);\n  }\n\n  async agetRates() {\n    const ts = this.props.id;\n    const url = `${APIURL}/capacity/handList?event_id=${ts}`;\n    var that = this;\n    await axios.get(url, {\n      withCredentials: true\n    }).then(function (response) {\n      if (response.data.data) {\n        that.setState({\n          tabledtnew: response.data.data\n        });\n      }\n    }).catch(function (error) {\n      console.log(error);\n      notification.error({\n        message: '提示',\n        description: error.message,\n        duration: 60,\n        placement: 'topCenter',\n        onClick: () => {\n          console.log('Notification Clicked!');\n        }\n      });\n    });\n  }\n\n  onBlur(v) {\n    console.log(v);\n    this.setState({\n      inputnum: v\n    });\n  }\n\n  async neednum(d) {\n    console.log(d);\n    console.log(this.state.tabledtnew[0]);\n    const url = `${APIURL}/capacity/update`;\n    var bodyFormData = new FormData();\n    bodyFormData.append(\"num\", this.state.inputnum);\n\n    if (d.id == this.state.tabledtnew[0].id) {\n      let tmpmarr = [];\n\n      for (let r = 0; r < this.state.tabledtnew.length; r++) {\n        tmpmarr.push(this.state.tabledtnew[r].id);\n      }\n\n      bodyFormData.append(\"capacity_id_list\", JSON.stringify(tmpmarr));\n    } else {\n      let tmp = [];\n      tmp.push(d.id);\n      bodyFormData.append(\"capacity_id_list\", JSON.stringify(tmp));\n    }\n\n    let that = this;\n    await axios.post(url, bodyFormData, {\n      withCredentials: true\n    }).then(function (response) {\n      if (response.data.code === 0) {\n        notification.success({\n          message: '提示',\n          description: '修改成功',\n          placement: 'topCenter',\n          onClick: () => {\n            console.log('Notification Clicked!');\n          }\n        });\n        that.agetRates();\n\n        if (d.id == that.state.tabledtnew[0].id) {\n          let ts = that.props.id;\n          that.props.history.push({\n            pathname: \"EventDetail\",\n            search: \"id=\" + ts,\n            state: {\n              id: ts\n            }\n          });\n          window.location = window.location.href + \"&tabs=capacity\";\n          window.location.reload();\n        }\n      }\n    }).catch(function (error) {\n      console.log(error);\n      notification.error({\n        message: '提示',\n        description: error.message,\n        duration: 60,\n        placement: 'topCenter',\n        onClick: () => {\n          console.log('Notification Clicked!');\n        }\n      });\n    });\n  }\n\n  async capacity_bulkExpand() {\n    this.onFinish();\n    var bodyFormData = new FormData();\n    let tmp = [];\n\n    if (this.state.expanded_ids.length == 0) {\n      notification.error({\n        message: '提示',\n        description: '请选择',\n        duration: 60,\n        placement: 'topCenter',\n        onClick: () => {\n          console.log('Notification Clicked!');\n        }\n      });\n      return false;\n    } else {\n      for (let i = 0; i < this.state.expanded_ids.length; i++) {\n        for (let j = 0; j < this.state.tabledtnew.length; j++) {\n          if (this.state.expanded_ids[i] == this.state.tabledtnew[j].id) {\n            if (this.state.tabledtnew[j].expand_oncall_id == 0) {\n              let tjs = this.state.tabledtnew[j];\n              tmp.push(tjs);\n            } else {\n              console.log(this.state.tabledtnew[j]);\n            }\n          }\n        }\n      }\n    }\n\n    let url = `${APIURL}/capacity/bulkExpand`;\n    bodyFormData.append(\"bulk_expand_list\", JSON.stringify(tmp));\n\n    if (tmp.length == 0) {\n      return false;\n    }\n\n    var that = this;\n    await axios.post(url, bodyFormData, {\n      withCredentials: true\n    }).then(function (response) {\n      console.log(response);\n\n      if (response.data.code === 0) {\n        notification.success({\n          message: '提示',\n          description: response.data.msg,\n          placement: 'topCenter',\n          onClick: () => {\n            console.log('Notification Clicked!');\n          }\n        });\n        that.agetRates();\n      } else {\n        notification.error({\n          message: '提示',\n          description: response.data.msg,\n          duration: 60,\n          placement: 'topCenter',\n          onClick: () => {\n            console.log('Notification Clicked!');\n          }\n        });\n      }\n    }).catch(function (error) {\n      console.log(error);\n      notification.error({\n        message: '提示',\n        description: error.message,\n        duration: 60,\n        placement: 'topCenter',\n        onClick: () => {\n          console.log('Notification Clicked!');\n        }\n      });\n    });\n  }\n\n  async capacitybulkReduce() {\n    this.onFinish();\n    let tmp = [];\n    var bodyFormData = new FormData();\n\n    if (this.state.reduced_ids.length == 0) {\n      notification.error({\n        message: '提示',\n        description: '请选择',\n        duration: 60,\n        placement: 'topCenter',\n        onClick: () => {\n          console.log('Notification Clicked!');\n        }\n      });\n      return false;\n    } else {\n      for (let i = 0; i < this.state.reduced_ids.length; i++) {\n        for (let j = 0; j < this.state.tabledtnew.length; j++) {\n          if (this.state.reduced_ids[i] == this.state.tabledtnew[j].id) {\n            if (this.state.tabledtnew[j].reduce_oncall_id == 0) {\n              tmp.push(this.state.tabledtnew[j].id);\n            } else {\n              console.log(this.state.tabledtnew[j]);\n            }\n          }\n        }\n      }\n    }\n\n    console.log(this.state.tabledtnew);\n    console.log(tmp);\n    bodyFormData.append(\"capacity_id_list\", JSON.stringify(tmp));\n    let url = `${APIURL}/capacity/bulkReduce`;\n\n    if (tmp.length == 0) {\n      return false;\n    }\n\n    var that = this;\n    await axios.post(url, bodyFormData, {\n      withCredentials: true\n    }).then(function (response) {\n      if (response.data.code === 0) {\n        that.agetRates();\n        notification.success({\n          message: '提示',\n          description: response.data.msg,\n          placement: 'topCenter',\n          onClick: () => {\n            console.log('Notification Clicked!');\n          }\n        });\n      } else {\n        console.log(response);\n        notification.error({\n          message: '提示',\n          description: response.data.msg,\n          duration: 60,\n          placement: 'topCenter',\n          onClick: () => {\n            console.log('Notification Clicked!');\n          }\n        });\n      }\n    }).catch(function (error) {\n      console.log(error);\n      notification.error({\n        message: '提示',\n        description: error.message,\n        duration: 60,\n        placement: 'topCenter',\n        onClick: () => {\n          console.log('Notification Clicked!');\n        }\n      });\n    });\n  }\n\n  render() {\n    console.log('render');\n    const columns = [{\n      title: '扩容工单号',\n      dataIndex: 'expand_oncall_id',\n      align: \"center\",\n      width: \"14.2%\",\n      render: (text, data, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n        children: data.expand_oncall_id == 0 ? /*#__PURE__*/_jsxDEV(Form.Item, {\n          valuePropName: \"expand\",\n          name: data.id + \"_a\",\n          initialValue: data.id,\n          children: /*#__PURE__*/_jsxDEV(Checkbox, {\n            onChange: this.checkeddt,\n            children: \" \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 26\n        }, this) : /*#__PURE__*/_jsxDEV(\"a\", {\n          rel: \"noopener noreferrer\",\n          href: `http://oncall.oa.com/workBench?id=${data.expand_oncall_id}`,\n          target: \"_blank\",\n          children: [\" \", data.expand_oncall_id, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 26\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 21\n      }, this)\n    }, {\n      title: '缩容工单号',\n      dataIndex: 'reduce_oncall_id',\n      align: \"center\",\n      width: \"14.2%\",\n      render: (text, data, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n        children: data.reduce_oncall_id == 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: data.expand_oncall_id == 0 ? /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: data.id,\n            defaultChecked: false,\n            valuePropName: \"reduce\",\n            children: /*#__PURE__*/_jsxDEV(Checkbox, {\n              disabled: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 39\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 35\n          }, this) : /*#__PURE__*/_jsxDEV(Form.Item, {\n            valuePropName: \"reduce\",\n            name: data.id,\n            initialValue: data.id,\n            children: /*#__PURE__*/_jsxDEV(Checkbox, {\n              onChange: this.checkedrd\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 26\n        }, this) : /*#__PURE__*/_jsxDEV(\"a\", {\n          rel: \"noopener noreferrer\",\n          href: `http://oncall.oa.com/workBench?id=${data.reduce_oncall_id}`,\n          target: \"_blank\",\n          children: [\" \", data.reduce_oncall_id, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 21\n      }, this)\n    }, {\n      title: '服务名',\n      dataIndex: 'server_name',\n      align: \"center\",\n      width: \"14.2%\",\n      render: (text, data, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\" \", data.app_name + \".\" + data.server_name, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 21\n      }, this)\n    }, {\n      title: 'set',\n      dataIndex: 'set_name',\n      align: \"center\",\n      width: \"14.2%\",\n      render: (text, data, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\" \", data.set_name ? data.set_name : \"--\", \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 21\n      }, this)\n    }, {\n      title: '地域',\n      dataIndex: 'area',\n      width: \"14.2%\",\n      align: \"center\"\n    }, {\n      title: '当前台数',\n      dataIndex: 'now_num',\n      align: \"center\",\n      width: \"14.2%\"\n    }, {\n      title: '扩容比例（%）',\n      dataIndex: 'expand_scale_num',\n      align: \"center\",\n      width: \"14.2%\",\n      render: (text, data, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"expandinputct\",\n        children: data.reduce_oncall_id == 0 || data.expand_oncall_id == 0 ? /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"neednum_\" + index,\n          initialValue: data.expand_scale_num,\n          children: data.expand_oncall_id != 0 ? /*#__PURE__*/_jsxDEV(InputNumber, {\n            disabled: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 555,\n            columnNumber: 33\n          }, this) : /*#__PURE__*/_jsxDEV(InputNumber, {\n            onChange: this.onBlur,\n            onBlur: () => this.neednum(data)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 557,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 29\n        }, this) : text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 21\n      }, this)\n    }];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"OTTDetail\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"divwrapott\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          className: \"btnb\",\n          onClick: this.capacitybulkReduce,\n          children: \" \\u4E00\\u952E\\u7F29\\u5BB9 \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          className: \"btna\",\n          onClick: this.capacity_bulkExpand,\n          children: \" \\u4E00\\u952E\\u6269\\u5BB9 \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 578,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 575,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        name: \"basic\",\n        autoComplete: \"off\",\n        onFinish: this.onFinish,\n        children: /*#__PURE__*/_jsxDEV(Table // rowSelection={rowSelection} \n        , {\n          columns: columns,\n          rowKey: \"id\",\n          dataSource: this.state.tabledtnew,\n          pagination: {\n            total: this.state.tabledtnew.length,\n            pageSize: this.state.tabledtnew.length\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 589,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 583,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 573,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(OTTDetail);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/Users/xc/Public/capacity_1103/front_new/src/views/pages/OTTDetail.js"],"names":["React","Table","Button","Form","Checkbox","InputNumber","notification","axios","withRouter","APIURL","expanded","reduced","OTTDetail","Component","constructor","props","onFinish","values","console","log","onSelectChange","selectedRowKeys","setState","fselectedRowKeys","state","tabledtnew","expanded_ids","reduced_ids","inputnum","capacity_bulkExpand","bind","capacitybulkReduce","checkeddt","checkedrd","onBlur","componentDidMount","agetRates","v","target","checked","push","reduce","rtm","rindex","indexOf","splice","expand","tm","tmindex","ts","id","url","that","get","withCredentials","then","response","data","catch","error","message","description","duration","placement","onClick","neednum","d","bodyFormData","FormData","append","tmpmarr","r","length","JSON","stringify","tmp","post","code","success","history","pathname","search","window","location","href","reload","i","j","expand_oncall_id","tjs","msg","reduce_oncall_id","render","columns","title","dataIndex","align","width","text","index","app_name","server_name","set_name","expand_scale_num","total","pageSize"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport { Table, Button,  Form , Checkbox, InputNumber,  notification} from 'antd';\n\nimport axios from \"axios\";\nimport { withRouter } from 'react-router-dom';\n\nimport {  APIURL } from '../../common/constdt.js';\n\nvar expanded = []\nvar reduced = []\n \n \n\nclass OTTDetail extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            \n            tabledtnew: [],\n            fselectedRowKeys: [],\n            expanded_ids: [],\n            reduced_ids: [],\n            inputnum: null,\n     \n\n        }\n        this.capacity_bulkExpand = this.capacity_bulkExpand.bind(this);\n        this.capacitybulkReduce = this.capacitybulkReduce.bind(this);\n        this.checkeddt = this.checkeddt.bind(this);\n        this.checkedrd = this.checkedrd.bind(this)\n        this.onBlur = this.onBlur.bind(this);\n       \n        \n    }\n\n\n     \n\n    componentDidMount() {\n        \n        this.agetRates()\n \n    }\n    onFinish = (values) => {\n        console.log('Success:', values);\n    }\n\n    checkedrd(v){\n\n        console.log(v.target)\n        if(v.target.checked){\n            reduced.push(v.target.reduce)\n        }else {\n            let rtm = v.target.reduce;\n            let rindex = reduced.indexOf(rtm);\n            reduced.splice(rindex,1)\n\n        }\n        this.setState({\n            reduced_ids: reduced\n        })\n        console.log(reduced)\n    }\n\n    checkeddt(v){\n        \n        console.log(v.target)\n        console.log(v.target.checked)\n        if(v.target.checked){\n            expanded.push(v.target.expand)\n        } else {\n            let tm = v.target.expand\n            let tmindex = expanded.indexOf(tm);\n            console.log(tmindex)\n            expanded.splice(tmindex,1)\n        }\n        this.setState({\n            expanded_ids: expanded\n        })\n        console.log(expanded)\n    }\n\n    async agetRates() {\n\n\n        const ts = this.props.id\n        const url = `${APIURL}/capacity/handList?event_id=${ts}`;\n\n        var that = this;\n        await axios.get(url, { withCredentials: true })\n        .then(function (response) {\n         \n            \n          if (response.data.data) {\n            \n            that.setState({\n                \n                tabledtnew: response.data.data,\n            })\n        }\n        })\n        .catch(function (error) {\n          console.log(error);\n          notification.error({\n            message: '提示',\n            description: error.message,\n            duration: 60,\n            placement: 'topCenter',\n            onClick: () => {\n            console.log('Notification Clicked!');\n            },\n        });\n        })\n  \n\n \n    }\n\n    onBlur(v){\n        \n        console.log(v)\n        this.setState({\n            inputnum: v,\n            \n        })\n        \n    }\n    \n \n    async neednum(d){\n        \n        console.log(d)\n        console.log(this.state.tabledtnew[0])\n\n        const url = `${APIURL}/capacity/update`;\n\n        var bodyFormData = new FormData();\n\n        bodyFormData.append(\"num\", this.state.inputnum);\n           \n        \n        if(d.id == this.state.tabledtnew[0].id){\n         \n           \n                let tmpmarr = []\n            \n                for(let r = 0; r < this.state.tabledtnew.length; r++){\n                    \n                    tmpmarr.push(this.state.tabledtnew[r].id)\n               \n                }\n                bodyFormData.append(\"capacity_id_list\", JSON.stringify(tmpmarr));\n \n        } else {\n            let tmp = []\n            tmp.push(d.id)\n            bodyFormData.append(\"capacity_id_list\",  JSON.stringify(tmp));\n        }\n            let that = this;\n            await axios.post(url, bodyFormData, { withCredentials: true })\n            .then(function (response) {\n                \n                \n                if (response.data.code === 0) {\n                    \n                    notification.success({\n                        message: '提示',\n                        description: '修改成功',\n                        placement: 'topCenter',\n                        onClick: () => {\n                        console.log('Notification Clicked!');\n                        },\n                    });\n                    \n                    that.agetRates()\n\n\n\n                    if(d.id == that.state.tabledtnew[0].id){\n                        let ts = that.props.id\n                        that.props.history.push({\n                            pathname: \"EventDetail\",\n                            search: \"id=\"+ts,\n                            state: {id: ts}\n                         }); \n            \n                        window.location  = window.location.href+\"&tabs=capacity\"\n                        window.location.reload() \n                    }\n                }\n            })\n            .catch(function (error) {\n                console.log(error);\n                notification.error({\n                    message: '提示',\n                    description: error.message,\n                    duration: 60,\n                    placement: 'topCenter',\n                    onClick: () => {\n                    console.log('Notification Clicked!');\n                    },\n                });\n            })\n        \n        \n        \n    }\n    async  capacity_bulkExpand() {\n  \n        this.onFinish()\n        var bodyFormData = new FormData();\n        let tmp = []\n        if(this.state.expanded_ids.length == 0) {\n            \n\n            notification.error({\n                message: '提示',\n                description: '请选择',\n                duration: 60,\n                placement: 'topCenter',\n                onClick: () => {\n                  console.log('Notification Clicked!');\n                },\n            });\n\n            return false;\n        } else {\n\n        \n            \n            for(let i = 0; i < this.state.expanded_ids.length; i++){\n\n                for(let j = 0; j < this.state.tabledtnew.length; j++){\n                    if(this.state.expanded_ids[i] == this.state.tabledtnew[j].id){\n                        if(this.state.tabledtnew[j].expand_oncall_id == 0){\n                           \n                            let tjs = this.state.tabledtnew[j];\n                            tmp.push(tjs)\n                            \n                        } else {\n                           console.log( this.state.tabledtnew[j] )\n                        }\n                        \n                    }\n                }\n\n            }\n        }\n        \n\n        let url = `${APIURL}/capacity/bulkExpand`;\n\n         \n        bodyFormData.append(\"bulk_expand_list\",  JSON.stringify(tmp));\n        \n       \n        \n        if(tmp.length == 0) {\n            return false;\n        }\n        var that = this;\n        await axios.post(url, bodyFormData, { withCredentials: true })\n          .then(function (response) {\n           \n            console.log(response)\n            if(response.data.code === 0){\n                 \n\n                 notification.success({\n                    message: '提示',\n                    description: response.data.msg,\n                    placement: 'topCenter',\n                    onClick: () => {\n                      console.log('Notification Clicked!');\n                    },\n                });\n\n                that.agetRates();\n            } else {\n             \n\n                notification.error({\n                    message: '提示',\n                    description: response.data.msg,\n                    duration: 60,\n                    placement: 'topCenter',\n                    onClick: () => {\n                      console.log('Notification Clicked!');\n                    },\n                });\n                \n            }\n            \n          })\n          .catch(function (error) {\n            console.log(error);\n            notification.error({\n                message: '提示',\n                description: error.message,\n                duration: 60,\n                placement: 'topCenter',\n                onClick: () => {\n                console.log('Notification Clicked!');\n                },\n            });\n          })\n           \n    }\n\n\n\n    async  capacitybulkReduce() {\n        \n        this.onFinish()\n\n        let tmp = []\n\n        var bodyFormData = new FormData();\n     \n        if(this.state.reduced_ids.length == 0) {\n            \n            notification.error({\n                message: '提示',\n                description: '请选择',\n                duration: 60,\n                placement: 'topCenter',\n                onClick: () => {\n                  console.log('Notification Clicked!');\n                },\n            });\n            \n            return false;\n        } else {\n\n        \n\n            for(let i = 0; i < this.state.reduced_ids.length; i++){\n\n                for(let j = 0; j < this.state.tabledtnew.length; j++){\n                    if(this.state.reduced_ids[i] == this.state.tabledtnew[j].id){\n                        if(this.state.tabledtnew[j].reduce_oncall_id == 0){\n                             \n                            tmp.push(this.state.tabledtnew[j].id);\n                           \n                        } else {\n                           console.log( this.state.tabledtnew[j] )\n                        }\n                        \n                    }\n                }\n\n            }\n        }\n        \n        console.log(this.state.tabledtnew)\n\n        \n        console.log(tmp)\n      \n        bodyFormData.append(\"capacity_id_list\", JSON.stringify(tmp));\n\n        let url = `${APIURL}/capacity/bulkReduce`;\n\n  \n        \n        if(tmp.length == 0) {\n            return false;\n        }\n        var that = this;\n        await axios.post(url, bodyFormData, { withCredentials: true })\n          .then(function (response) {\n            \n            if(response.data.code === 0){\n                that.agetRates();\n               \n\n                notification.success({\n                    message: '提示',\n                    description:\n                    response.data.msg,\n                    placement: 'topCenter',\n                    onClick: () => {\n                      console.log('Notification Clicked!');\n                    },\n                });\n                \n            } else {\n                console.log(response)\n              \n\n                notification.error({\n                    message: '提示',\n                    description:\n                    response.data.msg,\n                    duration: 60,\n                    placement: 'topCenter',\n                    onClick: () => {\n                      console.log('Notification Clicked!');\n                    },\n                });\n            }\n            \n          })\n          .catch(function (error) {\n            console.log(error);\n            notification.error({\n                message: '提示',\n                description: error.message,\n                duration: 60,\n                placement: 'topCenter',\n                onClick: () => {\n                console.log('Notification Clicked!');\n                },\n            });\n          })\n    }\n\n\n\n    onSelectChange = selectedRowKeys => {\n        console.log('selectedRowKeys changed: ', selectedRowKeys);\n        this.setState({ \n            fselectedRowKeys: selectedRowKeys\n        });\n      };\n    \n\n\n    render(){\n       \n        \n       console.log('render')\n\n        const columns = [\n            {\n                title: '扩容工单号',\n                dataIndex: 'expand_oncall_id',\n                align: \"center\",\n                width: \"14.2%\",\n                render: (text, data, index) => (\n                    <span>\n                     {data.expand_oncall_id == 0 ? (\n                         \n                         <Form.Item\n                            valuePropName=\"expand\"\n                            name={data.id+\"_a\"}\n                            initialValue={data.id}\n                        >    \n                            <Checkbox    onChange={this.checkeddt}> </Checkbox>\n\n                         </Form.Item>\n                     ) : (\n                          \n                         <a rel=\"noopener noreferrer\"  href={`http://oncall.oa.com/workBench?id=${data.expand_oncall_id}`}  target=\"_blank\"> {data.expand_oncall_id} </a>\n                     )}\n                    </span>\n                )\n\n            },  \n            {\n                title: '缩容工单号',\n                dataIndex: 'reduce_oncall_id',\n                align: \"center\",\n                width: \"14.2%\",\n                render: (text, data, index) => (\n                    <span>\n                     {data.reduce_oncall_id == 0 ? (\n                         \n                         <div>\n                             {data.expand_oncall_id == 0 ? (\n                                  <Form.Item\n                                     \n                                        name={data.id}\n                                        defaultChecked={false}\n                                        valuePropName=\"reduce\" \n                                         \n                                    >    \n                                      <Checkbox  disabled />\n            \n                                    </Form.Item>\n                             ): (\n                                <Form.Item\n                                    valuePropName=\"reduce\"\n                                    \n                                    name={data.id}\n                                    initialValue={data.id}\n                                >    \n                                    <Checkbox  onChange={this.checkedrd}></Checkbox>\n        \n                                </Form.Item>\n                             )}\n                         </div>\n                           \n\n                     ) : (\n                        <a rel=\"noopener noreferrer\"  href={`http://oncall.oa.com/workBench?id=${data.reduce_oncall_id}`} target=\"_blank\"> {data.reduce_oncall_id} </a>\n                     )}\n                    </span>\n                )\n\n            },\n          \n            {\n                title: '服务名',\n                dataIndex: 'server_name',\n                align: \"center\",\n                width: \"14.2%\",\n                render: (text, data, index) => (\n                    <span> {data.app_name+\".\"+data.server_name} </span>\n                )\n\n            },\n            {\n                title: 'set',\n                dataIndex: 'set_name',\n                align: \"center\",\n                width: \"14.2%\",\n                render: (text, data, index) => (\n                    <span> {data.set_name ? data.set_name : \"--\" } </span>\n                )\n\n            },\n            {\n                title: '地域',\n                dataIndex: 'area',\n                width: \"14.2%\",\n                align: \"center\",\n\n            },\n            {\n                title: '当前台数',\n                dataIndex: 'now_num',\n                align: \"center\",\n                width: \"14.2%\",\n\n            },\n            {\n                title: '扩容比例（%）',\n                dataIndex: 'expand_scale_num',\n                align: \"center\",\n                width: \"14.2%\",\n                render: (text, data, index) => (\n                    <span className=\"expandinputct\">\n                        {data.reduce_oncall_id == 0 || data.expand_oncall_id == 0 ? (\n                            <Form.Item\n                        \n                            name={\"neednum_\"+index}\n                          \n                            initialValue={data.expand_scale_num}\n                            >    \n                            {data.expand_oncall_id != 0 ? (\n                                <InputNumber  disabled />\n                            ): (\n                                <InputNumber   onChange={this.onBlur}  onBlur={()=> this.neednum(data)}  />\n                            )}\n                                \n    \n                            </Form.Item>\n\n                        ):( text )} \n                     \n                    </span>\n                )\n\n            }\n            \n           \n        ]\n        return(\n            <div id=\"OTTDetail\"> \n             \n                <div id=\"divwrapott\">\n                    \n                    <Button type=\"primary\"   className=\"btnb\" onClick={this.capacitybulkReduce}> 一键缩容 </Button>\n                    <Button type=\"primary\"   className=\"btna\" onClick={this.capacity_bulkExpand}> 一键扩容 </Button>\n                    \n                </div> \n            \n       \n            <Form\n                name=\"basic\"\n                autoComplete=\"off\"\n                onFinish={this.onFinish}\n            >\n              \n                <Table\n                   // rowSelection={rowSelection} \n                    columns={columns}\n                    rowKey=\"id\"\n                    dataSource={this.state.tabledtnew}\n                    pagination={{\n                        total: this.state.tabledtnew.length,\n                        pageSize: this.state.tabledtnew.length,\n                    }}\n                />\n \n            </Form>\n\n            \n            \n\n             </div>\n        )\n    }\n}\n\n\nexport default withRouter(OTTDetail);"]},"metadata":{},"sourceType":"module"}